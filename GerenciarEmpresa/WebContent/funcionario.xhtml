<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"> 

<h:head>
	<title>Gerenciar Funcionários</title>
</h:head> 
<body> 
	<!-- Formulário para cadastrar ou editar um funcionário -->
    <h:form id="funcionarioForm">
        <h:panelGrid columns="2" cellpadding="5">
            <h:outputLabel for="nome" value="Nome do Funcionário:" />
            <h:inputText id="nome" value="#{funcionarioBean.funcionario.nome}" required="true" />
            
            <h:outputLabel for="idade" value="Idade:" />
            <h:inputText id="idade" value="#{funcionarioBean.funcionario.idade}" required="true" />

            <h:outputLabel for="cpf" value="CPF:" />
            <h:inputText id="cpf" value="#{funcionarioBean.funcionario.cpf}" required="true" />
            
            <h:outputLabel for="salario" value="Salario:" />
            <h:inputText id="salario" value="#{funcionarioBean.funcionario.salario}" required="true" />

            <h:outputLabel for="filial" value="Filial:" />
            <h:selectOneMenu id="filial" value="#{funcionarioBean.funcionario.filial}" required="true">
                <f:selectItems value="#{funcionarioBean.filial}" var="filial" itemValue="#{filial}" itemLabel="#{filial.nome} - #{filial.endereco.cidade}" />
            </h:selectOneMenu>

            <h:commandButton value="Salvar"
            	 action="#{funcionarioBean.gravarFuncionario()}" rendered="#{!funcionarioBean.edicao}"/>
           	<h:commandButton value="Atualizar"
				action="#{funcionarioBean.editarFuncionario()}" rendered="#{funcionarioBean.edicao}" />
            <h:button outcome="index" value="Voltar" />
        </h:panelGrid>
    </h:form>
    
    <h:messages />
    
	<h:form>
		<!-- Tabela para listar os funcionários -->
    	<h:dataTable value="#{funcionarioBean.listaFuncionario}" var="funcAtual" border="1">
	        <h:column>
	            <f:facet name="header">Nome</f:facet>
	            #{funcionario.nome}
	        </h:column>
	        <h:column>
	            <f:facet name="header">idade</f:facet>
	            #{funcionario.idade}
	        </h:column>
	        <h:column>
	            <f:facet name="header">CPF</f:facet>
	            #{funcionario.cpf}
	        </h:column>
	        <h:column>
	            <f:facet name="header">Salario</f:facet>
	            #{funcionario.salario}
	        </h:column>
	        <h:column>
	            <f:facet name="header">Filial</f:facet>
	            #{funcionario.filial.nome}
	        </h:column>
	        <h:column>
	            <f:facet name="header">Cidade da Filial</f:facet>
	            #{funcionario.filial.endereco.cidade}
	        </h:column>
	        <h:column>
	            <f:facet name="header">Ações</f:facet>
	            <h:commandButton value="Editar"
						action="#{funcionarioBean.carregarFuncionario(funcAtual)}" />
	            <h:commandButton value="Excluir"
	            		action="#{funcionarioBean.apagarFuncionario()}" />
	        </h:column>
    	</h:dataTable>
	</h:form>
    
</body> 
</html>
